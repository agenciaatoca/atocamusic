<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atoca Gem - Intelig√™ncia para Eventos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --gem-bg: #131314;
            --gem-surface: #1e1f20;
            --gem-border: #444746;
            --gem-blue: #8ab4f8;
        }

        body { 
            font-family: 'Inter', sans-serif; 
            background-color: var(--gem-bg); 
            color: #e3e3e3;
            overflow-x: hidden;
        }

        h1, h2, h3 { font-family: 'Google Sans', sans-serif; }

        .gem-container {
            background: var(--gem-surface);
            border: 1px solid var(--gem-border);
            border-radius: 28px;
        }

        .input-area {
            background: #1e1f20;
            border: 1px solid var(--gem-border);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .input-area:focus-within {
            border-color: var(--gem-blue);
            background: #28292a;
        }

        .preset-chip {
            background: transparent;
            border: 1px solid var(--gem-border);
            color: #c4c7c5;
            transition: all 0.2s;
        }

        .preset-chip:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: #8e918f;
        }

        .preset-chip.active {
            background: rgba(138, 180, 248, 0.1);
            border-color: var(--gem-blue);
            color: var(--gem-blue);
        }

        .gem-gradient {
            background: linear-gradient(135deg, #4285f4, #9b72cb, #d96570);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .loading-shimmer {
            background: linear-gradient(90deg, #1e1f20 25%, #2b2c2e 50%, #1e1f20 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

        .response-card {
            background: #1e1f20;
            border: 1px solid var(--gem-border);
            border-radius: 24px;
        }

        /* Bot√£o flutuante estilo Google */
        .btn-fab {
            background: var(--gem-blue);
            color: #041e49;
            box-shadow: 0 4px 12px rgba(138, 180, 248, 0.3);
        }

        .btn-fab:hover {
            box-shadow: 0 6px 16px rgba(138, 180, 248, 0.4);
            transform: translateY(-1px);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-4 md:p-8">

    <div class="w-full max-w-4xl flex-1 flex flex-col">
        
        <!-- Header minimalista -->
        <header class="flex items-center justify-between mb-12 w-full px-4">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-lg bg-gradient-to-tr from-blue-500 to-purple-500 flex items-center justify-center">
                    <i class="fas fa-sparkles text-white text-xs"></i>
                </div>
                <h1 class="text-xl font-medium tracking-tight">Atoca <span class="text-slate-500">Gem</span></h1>
            </div>
            <div class="flex items-center gap-4">
                <span class="text-[10px] font-bold text-slate-500 uppercase tracking-widest bg-slate-800/50 px-3 py-1 rounded-full border border-slate-700">
                    Flash 2.0 Engine
                </span>
            </div>
        </header>

        <!-- √Årea de Exibi√ß√£o do Resultado -->
        <main class="flex-1 flex flex-col w-full">
            
            <div id="welcome-screen" class="my-auto text-center space-y-6">
                <h2 class="text-4xl md:text-5xl font-medium tracking-tight">Crie convites que <br><span class="gem-gradient font-bold italic">lotam sua casa.</span></h2>
                <p class="text-slate-400 text-sm max-w-md mx-auto">Sua intelig√™ncia artificial dedicada a transformar m√∫sica ao vivo em faturamento real.</p>
                
                <!-- Chips de Sugest√£o -->
                <div class="flex flex-wrap justify-center gap-2 pt-6">
                    <button onclick="applyPreset('Rock & Pop', 'Dose dupla de chopp at√© 21h')" class="preset-chip px-4 py-2 rounded-full text-xs font-medium">üé∏ Noite do Rock</button>
                    <button onclick="applyPreset('Sertanejo', 'Lista VIP no site')" class="preset-chip px-4 py-2 rounded-full text-xs font-medium">ü§† Sexta Sertaneja</button>
                    <button onclick="applyPreset('Happy Hour', '30% OFF em petiscos')" class="preset-chip px-4 py-2 rounded-full text-xs font-medium">üçª Happy Hour</button>
                </div>
            </div>

            <!-- Loader -->
            <div id="ai-loading" class="hidden w-full max-w-2xl mx-auto space-y-4">
                <div class="h-4 w-3/4 loading-shimmer rounded-full opacity-50"></div>
                <div class="h-4 w-full loading-shimmer rounded-full opacity-50"></div>
                <div class="h-4 w-1/2 loading-shimmer rounded-full opacity-50"></div>
            </div>

            <!-- Resultado -->
            <div id="response-container" class="hidden w-full max-w-3xl mx-auto space-y-6">
                <div class="response-card p-8 shadow-2xl relative">
                    <div id="output-text" class="text-slate-200 text-lg leading-relaxed whitespace-pre-wrap font-medium">
                        <!-- Gerado pela IA -->
                    </div>
                </div>
                <div class="flex items-center justify-center gap-4">
                    <button onclick="copyContent()" class="btn-fab px-8 py-3 rounded-full font-bold text-sm transition-all flex items-center gap-2">
                        <i class="fas fa-copy"></i> COPIAR SCRIPT
                    </button>
                    <button onclick="resetApp()" class="text-slate-500 hover:text-white text-xs font-bold uppercase tracking-widest px-4 py-2">
                        <i class="fas fa-plus mr-2"></i> Novo Convite
                    </button>
                </div>
            </div>
        </main>

        <!-- Barra de Comando Estilo Gem -->
        <div class="mt-8 mb-4 w-full">
            <div class="max-w-3xl mx-auto input-area p-2 rounded-[2.5rem] flex flex-col gap-2 shadow-2xl">
                <div class="flex flex-col md:flex-row gap-2 px-4 pt-2">
                    <input type="text" id="bar-name" placeholder="Nome do bar..." 
                           class="flex-1 bg-transparent py-2 text-white text-sm outline-none border-none placeholder-slate-600 font-medium">
                    <div class="hidden md:block w-[1px] h-6 bg-slate-700 self-center"></div>
                    <input type="text" id="style-text" placeholder="Estilo musical..." 
                           class="flex-1 bg-transparent py-2 text-white text-sm outline-none border-none placeholder-slate-600 font-medium">
                </div>
                <div class="relative flex items-center">
                    <textarea id="extra-info" rows="1" placeholder="Adicione uma oferta ou detalhe extra..." 
                              class="flex-1 bg-transparent px-4 py-3 text-slate-300 text-sm outline-none border-none placeholder-slate-600 resize-none"></textarea>
                    <button onclick="generateInvite()" id="btn-generate" 
                            class="mr-2 w-10 h-10 rounded-full flex items-center justify-center transition-all bg-sky-500 text-slate-900 hover:bg-sky-400">
                        <i id="send-icon" class="fas fa-arrow-up"></i>
                        <div id="spinner" class="hidden w-4 h-4 border-2 border-slate-900 border-t-transparent rounded-full animate-spin"></div>
                    </button>
                </div>
            </div>
            <p class="text-center text-[10px] text-slate-600 mt-4 uppercase tracking-[0.2em]">Atoca Gem pode produzir scripts criativos. Verifique as informa√ß√µes.</p>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-10 left-1/2 -translate-x-1/2 bg-white text-slate-950 px-6 py-3 rounded-full text-xs font-bold shadow-2xl hidden z-[100] animate-bounce">
        <span id="toast-text"></span>
    </div>

    <script>
        // CHAVE API ATUALIZADA E V√ÅLIDA
        const apiKey = "AIzaSyCIHzpf-iw_SocQOJq_dbGs7fJwt-6hogk"; 

        function applyPreset(style, extra) {
            document.getElementById('style-text').value = style;
            document.getElementById('extra-info').value = extra;
            showToast(`Tema ${style} aplicado!`);
        }

        function showToast(msg) {
            const el = document.getElementById('toast');
            document.getElementById('toast-text').innerText = msg;
            el.classList.remove('hidden');
            setTimeout(() => el.classList.add('hidden'), 3000);
        }

        function resetApp() {
            document.getElementById('welcome-screen').classList.remove('hidden');
            document.getElementById('response-container').classList.add('hidden');
            document.getElementById('bar-name').value = "";
            document.getElementById('style-text').value = "";
            document.getElementById('extra-info').value = "";
        }

        async function callGemini(prompt, systemInstruction) {
            // Endpoint Gemini 2.0 Flash conforme solicitado
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
            
            const payload = {
                contents: [{ 
                    parts: [{ text: `INSTRU√á√ÉO DE SISTEMA: ${systemInstruction}\n\nREQUISI√á√ÉO DO USU√ÅRIO: ${prompt}` }] 
                }]
            };

            const response = await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            
            if (!response.ok) {
                const errData = await response.json();
                console.error("Erro na API:", errData);
                throw new Error(errData.error?.message || 'Erro de conex√£o');
            }
            
            const data = await response.json();
            return data.candidates[0].content.parts[0].text;
        }

        async function generateInvite() {
            const bar = document.getElementById('bar-name').value;
            const style = document.getElementById('style-text').value;
            const extra = document.getElementById('extra-info').value;
            
            const welcome = document.getElementById('welcome-screen');
            const loading = document.getElementById('ai-loading');
            const container = document.getElementById('response-container');
            const output = document.getElementById('output-text');
            
            const sendIcon = document.getElementById('send-icon');
            const spinner = document.getElementById('spinner');

            if (!bar) return showToast("Por favor, informe o nome do bar.");

            // Estado de carregamento
            welcome.classList.add('hidden');
            container.classList.add('hidden');
            loading.classList.remove('hidden');
            sendIcon.classList.add('hidden');
            spinner.classList.remove('hidden');

            const sys = `Voc√™ √© o Atoca Gem, especialista em marketing viral para bares de Bras√≠lia. 
            Crie um convite magn√©tico para redes sociais. 
            Diretrizes: use emojis, tom vibrante, foco em experi√™ncia e faturamento. 
            Fale como um brasiliense moderno (Asa Sul, Norte, √Åguas Claras, etc). 
            Estrutura: Gancho impactante -> Clima da noite -> Diferencial/Oferta -> CTA claro.`;

            const prompt = `Bar: "${bar}". Atra√ß√£o/Estilo: "${style}". Oferta Extra: "${extra}". Gere um texto de alto engajamento.`;

            try {
                const text = await callGemini(prompt, sys);
                output.innerText = text;
                loading.classList.add('hidden');
                container.classList.remove('hidden');
            } catch (error) {
                showToast("Erro: " + error.message);
                welcome.classList.remove('hidden');
                loading.classList.add('hidden');
            } finally {
                sendIcon.classList.remove('hidden');
                spinner.classList.add('hidden');
            }
        }

        function copyContent() {
            const text = document.getElementById('output-text').innerText;
            const textArea = document.createElement("textarea");
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            showToast("Copiado com sucesso! ‚ú®");
        }

        // Auto-expand textarea
        const tx = document.getElementById('extra-info');
        tx.addEventListener("input", function() {
            this.style.height = "auto";
            this.style.height = (this.scrollHeight) + "px";
        }, false);
    </script>
</body>
</html>
